{"generator":"Code Snippets v2.14.1","date_created":"2021-06-21 17:52","snippets":[{"name":"No taxes for groceries","scope":"global","code":"add_action( 'woocommerce_review_order_before_submit','wc_check_taxes', 10 ); \nfunction wc_check_taxes() { \n    global $woocommerce; \n\n    if ( is_admin() && ! defined( 'DOING_AJAX' ) ) \n    return;\n\t\n\t\n\t$bWarm = false;\n    foreach ( $woocommerce->cart->get_cart() as $cart_item ) {\n   \t\t$item_name = $cart_item['data']->get_title();\n\t\techo $item_name . '<br>';\n\t\t\n\t\t\/\/ if simple or variable product, this should now work \n\t\t$the_product = wc_get_product( $cart_item['product_id'] );\n\t\t$catlist = $the_product->get_category_ids();\n\n\t\t\/\/ is product delivered warm? \n\t\tif ( in_array(37, $catlist )) {\n\t\t\t$bWarm = true;\n\t\t\techo 'true';\n\t\t}\t\n\t}\n\t\n\tif ( $bWarm ) { \/* restaurant delivery *\/\n        $woocommerce->customer->set_is_vat_exempt( false ); \n    }\n    else { \/* all grocery items *\/\n        $woocommerce->customer->set_is_vat_exempt( true );\n    }\n}\n\n\n\n","priority":"10"}]}